<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ガチャシミュレーター</title>
    <style>
        body { background: #222; color: white; font-family: sans-serif; text-align: center; }
        .container { padding: 20px; }
        
        /* カードが並ぶエリア */
        #result-area {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5列ずつ表示 */
            gap: 10px;
            max-width: 600px;
            margin: 20px auto;
        }

        /* カードの基本デザイン */
        .card {
            height: 120px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            background: #444;
            transition: transform 0.2s;
        }

        /* レアリティ別の色付け */
        .r   { background: #888; color: #eee; }
        .sr  { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); border: 2px solid #ff00ff; }
        .ssr { background: linear-gradient(45deg, #fccb90 0%, #d57eeb 100%); border: 3px solid gold; box-shadow: 0 0 15px gold; }

        button {
            padding: 15px 30px; font-size: 18px; cursor: pointer;
            background: #ffaa00; border: none; border-radius: 50px; font-weight: bold;
        }
        button:active { transform: scale(0.95); }
    </style>
</head>
<body>

<div class="container">
    <h1>10連ガチャ</h1>
    <button onclick="playGacha()">10連を引く！</button>
    <div id="result-area">
        </div>
</div>

<script>
async function playGacha() {
    const area = document.getElementById('result-area');
    const button = document.querySelector('button');
    
    // 準備：ボタンを無効化し、画面をリセット
    button.disabled = true;
    area.innerHTML = ""; 

    // 1. 溜め演出（仮でメッセージ表示）
    const loadingMsg = document.createElement('div');
    loadingMsg.innerText = "召喚中...";
    loadingMsg.style.gridColumn = "1 / -1"; // 横いっぱいに表示
    area.appendChild(loadingMsg);

    // 1.5秒待機（ここでドキドキさせる）
    await new Promise(resolve => setTimeout(resolve, 1500));
    loadingMsg.remove();

    // 2. 抽選ロジック
    const rates = { ssr: 0.03, sr: 0.17 };
    const results = [];
    for (let i = 0; i < 10; i++) {
        const rand = Math.random();
        let rarity = rand < rates.ssr ? "ssr" : (rand < rates.ssr + rates.sr ? "sr" : "r");
        results.push(rarity);
    }

    // 3. 1枚ずつ順番に表示
    for (const rarity of results) {
        const card = document.createElement('div');
        card.className = `card ${rarity} animate-in`; // アニメーション用クラス
        card.innerText = rarity.toUpperCase();
        area.appendChild(card);

        // 0.2秒待ってから次のカードを出す
        await new Promise(resolve => setTimeout(resolve, 200));
    }

    button.disabled = false; // 終了後にボタンを戻す
}
</script>

</body>
</html>
